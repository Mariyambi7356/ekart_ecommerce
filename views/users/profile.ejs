<!doctype html>
<html lang="zxx">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>teccas</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- animate CSS -->
  <link rel="stylesheet" href="css/animate.css">
  <!-- owl carousel CSS -->
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <!-- nice select CSS -->
  <link rel="stylesheet" href="css/nice-select.css">
  <!-- font awesome CSS -->
  <link rel="stylesheet" href="css/all.css">
  <!-- flaticon CSS -->
  <link rel="stylesheet" href="css/flaticon.css">
  <link rel="stylesheet" href="css/themify-icons.css">
  <!-- font awesome CSS -->
  <link rel="stylesheet" href="css/magnific-popup.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
  <!-- swiper CSS -->
  <link rel="stylesheet" href="css/slick.css">
  <link rel="stylesheet" href="css/price_rangs.css">
  <link rel="shortcut icon" href="/images/teccas.jpg" type="image/x-icon">
  <!-- style CSS -->
  <link rel="stylesheet" href="css/style.css">


</head>

<body>

  <header class="main_menu home_menu">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-12">
          <nav class="navbar navbar-expand-lg navbar-light">
            <h1></h1>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="menu_icon"><i class="fas fa-bars"></i></span>
            </button>

            <div class="collapse navbar-collapse main-menu-item" id="navbarSupportedContent">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <h1 class="nav mt-3">Teccas</h1>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link " href="/shop" id="navbarDropdown_1" role="button" aria-haspopup="true"
                    aria-expanded="false">
                    Shop
                  </a>

                
                <li class="nav-item">
                  <a class="nav-link">Profile</a>
                </li>





                <li class="nav-item">
                  <div class="dropdown mt-4 ms-5">
                    <button class="btn  dropdown-toggle" type="button" id="dropdownMenuButton1"
                      data-bs-toggle="dropdown">
                      Click
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                      <% if(session!=null){ %>
                        <li><a class="dropdown-item" href="/logout">Logout</a></li>
                        <% }else{%>
                          <li><a class="dropdown-item" href="/login">Login</a></li>
                          <li><a class="dropdown-item" href="/signup">Signup</a></li>
                          <%}%>
                    </ul>
                  </div>
                </li>
              </ul>
            </div>
            <div class="hearer_icon d-flex">

              <a href="/wishlist"><i class="ti-heart"></i></a>
              <div class="dropdown cart">
                <a class="dropdown-toggle" id="navbarDropdown3" role="button" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  <a href="/cart"><i class="fas fa-cart-plus"></i></a>
                </a>


              </div>
            </div>
          </nav>
        </div>
      </div>
    </div>

  </header>
  <section class="breadcrumb breadcrumb_bg">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="breadcrumb_iner">
            <div class="breadcrumb_iner_item">
              <h2>Profile</h2>
              <p>Your<span>-</span>Details</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- breadcrumb start-->


  <section class="mt-5">
    <div class="justify-content-center d-flex">



    </div>
    <div class="container py-5">
      <div class="row">
        <div class="col">

        </div>
      </div>

      <div class="row">
        <div class="col-lg-4">
          <div class="card mb-4">
            <div class="card-body text-center ">
              <% let images=[ 'images/avathar1.jpg' , 'images/avathar2.jpg' , 'images/avathar3.jpg' ]; %>


                <% var randomIndex=Math.floor(Math.random() * images.length); %>


                  <img class="rounded-circle img-fluid" style="width: 150px;" src="<%= images[randomIndex] %>" alt="" />
                  <!-- <img  class="rounded-circle img-fluid" style="width: 150px;" src="images/avathar1.jpg" alt="" /> -->


                  <h5 class="my-3">
                    <%= user.name %>
                  </h5>
                  <h6>Wallet: <span> $<%= wallet %></span> </h6>


            </div>
          </div>
          <div class="card mb-4 mb-lg-0">
            <div class="card-body p-0">
              <ul class="list-group list-group-flush rounded-3">
                <li class="list-group-item d-flex  justify-content-center align-items-center p-3">

                  <h6 class=" mt-2 "><a href="/editProfile"> update Profile </a></h6>
                </li>
                <li class="list-group-item d-flex justify-content-center align-items-center p-3">

                  <h6 class="mb-0 mt-2"><a href="/orders">Order Details</a></h6>
                </li>
                <li class="list-group-item d-flex justify-content-center align-items-center p-3">

                  <h6 class="mb-0 mt-2"><a href="/addAddress">Add Address</a></h6>
                </li>
              


              </ul>
            </div>
          </div>
        </div>
        <div class="col-lg-8">
          <div class="card mb-4">
            <div class="card-body">
              <div class="row">
                <div class="col-sm-3 ms-3">
                  <p class="mb-0">Full Name</p>
                </div>
                <div class="col-sm-9">
                  <% if (user.name) { %>
                    <p class="text-muted mb-0">
                      <%= user.name %>
                    </p>
                    <% } else { %>
                      <p><a href="/editProfile">
                          <p class="text-muted mb-0 ">Add Name+
                        </a></p>
                      <% } %>
                </div>
              </div>
              <hr>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0">Email</p>
                </div>
                <div class="col-sm-9">
                  <% if (user.email) { %>
                    <p class="text-muted mb-0">
                      <%= user.email %>
                    </p>
                    <% } else { %>
                      <p><a href="/editProfile">
                          <p class="text-muted mb-0">Add Email +
                        </a></p>
                      <% } %>

                </div>
              </div>
              <hr>

              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0">Mobile</p>
                </div>
                <div class="col-sm-9">
                  <p class="text-muted mb-0">
                    <%= user.mobile %>
                  </p>
                </div>
              </div>
              <hr>
              

            </div>
           
          </div>

        <div class="ml-2">

          <h5>My Addresses</h1>
          
          <% user.address.forEach(function(address, index) { %>
            <hr>
            <div class="row">

              <div class="col-sm-3">
                <p class="mb-0">Address <%= index+1 %>
                </p>
              </div>

              <div class="col-sm-6">
                <p class="text-muted mb-0">
                  <%= address.address %>, <%= address.city %>
                </p>
              </div>
              <div class="col-sm-3">
                
                  <p class="text-blue mb-0"
                     style="color: #0073ff; font-size: 0.8rem;"
                    
                  >
              
              <% if (index !== user.defaultAddress) { %>    <span id="span-<%= index%>" onclick="handleDefaultAddress('<%= index %>')">Set as default</span> <% } %>
              <% if (index === user.defaultAddress) { %> <span id="default-aahne"> default</span>  <% } %> 

                  </p>
             </div>
            
              </div>

            </div>
            <hr> 
            <% }) %>  
        </div>
        </div>
        
      </div>
      
   
  </section>

  
  


  <!-- ::footer_part start:: -->
  <footer class="footer_part" style="background-color:#e9ecef;">
    <div class="container">
      <div class="row justify-content-around">
        <div class="col-sm-6 col-lg-2">
          <div class="single_footer_part">
            <h4>Top Products</h4>
            <ul class="list-unstyled">
              <li><a>H&M</a></li>
              <li><a>Jack & JONES</a></li>
              <li><a>ADIDAS</a></li>
              <li><a>NIKE</a></li>
            </ul>
          </div>
        </div>
        <div class="col-sm-6 col-lg-2">
          <div class="single_footer_part">
            <h4>Quick Links</h4>
            <ul class="list-unstyled">
              <li><a href="/profile">PROFILE</a></li>
              <li><a href="/shop">SHOP</a></li>
              <li><a href="/cart">CART</a></li>
              <li><a href="/wishlist">WISHLIST</a></li>
            </ul>
          </div>
        </div>
        <div class="col-sm-6 col-lg-2">
          <div class="single_footer_part">
            <h4>Features</h4>
            <ul class="list-unstyled">
              <li><a>Wallet</a></li>
              <li><a>Pagination</a></li>
              <li><a>Return</a></li>
              <li><a>Filter</a></li>
            </ul>
          </div>
        </div>


      </div>

    </div>
    <div class="d-flex justify-content-center mt-5">
      <div class="footer_icon social_icon">
        <ul class="list-unstyled">
          <li><a class="single_social_icon" href="https://github.com/mariyambi" target="_blank"><i
                class="fa-brands fa-github"></i></a></li>
          <li><a class="single_social_icon" href="https://twitter.com/mariyambi" target="_blank"><i
                class="fab fa-twitter"></i></a></li>
          <li><a class="single_social_icon" href="https://www.linkedin.com/in/mariyambi-701125249"
              target="_blank"><i class="fa-brands fa-linkedin"></i></a></li>
          <li><a class="single_social_icon" href="https://instagram.com/mariyambi?igshid=YmMyMTA2M2Y="
              target="_blank"><i class="fa-brands fa-square-instagram"></i></a></li>
        </ul>
      </div>
    </div>
  </footer>
  <!-- ::footer_part end:: -->


  <!-- jquery -->
  <script src="js/jquery-1.12.1.min.js"></script>
  <!-- popper js -->
  <script src="js/popper.min.js"></script>
  <!-- bootstrap js -->
  <script src="js/bootstrap.min.js"></script>
  <!-- easing js -->
  <script src="js/jquery.magnific-popup.js"></script>
  <!-- swiper js -->
  <script src="js/swiper.min.js"></script>
  <!-- swiper js -->
  <script src="js/masonry.pkgd.js"></script>
  <!-- particles js -->
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.nice-select.min.js"></script>
  <!-- slick js -->
  <script src="js/slick.min.js"></script>
  <script src="js/jquery.counterup.min.js"></script>
  <script src="js/waypoints.min.js"></script>
  <script src="js/contact.js"></script>
  <script src="js/jquery.ajaxchimp.min.js"></script>
  <script src="js/jquery.form.js"></script>
  <script src="js/jquery.validate.min.js"></script>
  <script src="js/mail-script.js"></script>
  <script src="js/stellar.js"></script>
  <script src="js/price_rangs.js"></script>
  <!-- custom js -->
  <script src="js/custom.js"></script>

  <script>
    function handleDefaultAddress(index) {
      console.log(index)
const userData = {
   index
};

const url = "/set/address";
const options = {
    method: "POST", 
    headers: {
        "Content-Type": "application/json", 
    },
    body: JSON.stringify(userData),
};

fetch(url, options)
    .then(response => {
        if (!response.ok) {
            throw new Error("Network response was not ok");
        }
        return response.json();
    })
    .then(data => {
      const scrollY = window.scrollY;
      window.location.reload()
    window.scrollTo(0, scrollY);
   
    })
    .catch(error => {
        console.error("Error during fetch:", error);
    });

    }
  </script>